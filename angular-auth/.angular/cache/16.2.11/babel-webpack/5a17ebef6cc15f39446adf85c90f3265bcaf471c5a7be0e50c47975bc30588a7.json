{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { exhaustMap, take } from 'rxjs/operators';\nimport { AuthService } from \"./auth.service\";\nimport { inject } from \"@angular/core\";\nexport class AuthInterceptorService {\n  constructor() {\n    this.authService = inject(AuthService);\n  }\n  intercept(req, next) {\n    return this.authService.user.pipe(take(1), exhaustMap(user => {\n      const modifiedRequest = req.clone({\n        params: new HttpParams().set('auth', user.token)\n      });\n      return next.handle(modifiedRequest);\n    }));\n  }\n}","map":{"version":3,"names":["HttpParams","exhaustMap","take","AuthService","inject","AuthInterceptorService","constructor","authService","intercept","req","next","user","pipe","modifiedRequest","clone","params","set","token","handle"],"sources":["D:\\angular practise\\Practise\\angular-auth\\src\\app\\Services\\auth-interceptor.service.ts"],"sourcesContent":["import {HttpInterceptor, HttpRequest, HttpHandler, HttpEventType, HttpParams} from '@angular/common/http';\r\nimport {exhaustMap, take, tap} from 'rxjs/operators';\r\nimport {AuthService} from \"./auth.service\";\r\nimport {inject} from \"@angular/core\";\r\nimport {User} from \"../Model/user\";\r\n\r\nexport class AuthInterceptorService implements HttpInterceptor {\r\n\r\n    authService: AuthService = inject(AuthService);\r\n\r\n    intercept(req: HttpRequest<any>, next: HttpHandler) {\r\n        return this.authService.user.pipe(take(1), exhaustMap((user: User) => {\r\n            const modifiedRequest = req.clone(\r\n                {params: new HttpParams().set('auth', user.token)}\r\n            );\r\n            return next.handle(modifiedRequest);\r\n        }));\r\n    }\r\n}\r\n"],"mappings":"AAAA,SAAkEA,UAAU,QAAO,sBAAsB;AACzG,SAAQC,UAAU,EAAEC,IAAI,QAAY,gBAAgB;AACpD,SAAQC,WAAW,QAAO,gBAAgB;AAC1C,SAAQC,MAAM,QAAO,eAAe;AAGpC,OAAM,MAAOC,sBAAsB;EAAnCC,YAAA;IAEI,KAAAC,WAAW,GAAgBH,MAAM,CAACD,WAAW,CAAC;EAUlD;EARIK,SAASA,CAACC,GAAqB,EAAEC,IAAiB;IAC9C,OAAO,IAAI,CAACH,WAAW,CAACI,IAAI,CAACC,IAAI,CAACV,IAAI,CAAC,CAAC,CAAC,EAAED,UAAU,CAAEU,IAAU,IAAI;MACjE,MAAME,eAAe,GAAGJ,GAAG,CAACK,KAAK,CAC7B;QAACC,MAAM,EAAE,IAAIf,UAAU,EAAE,CAACgB,GAAG,CAAC,MAAM,EAAEL,IAAI,CAACM,KAAK;MAAC,CAAC,CACrD;MACD,OAAOP,IAAI,CAACQ,MAAM,CAACL,eAAe,CAAC;IACvC,CAAC,CAAC,CAAC;EACP"},"metadata":{},"sourceType":"module","externalDependencies":[]}